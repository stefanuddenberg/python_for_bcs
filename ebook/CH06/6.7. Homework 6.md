# 6.7 Homework 6

In your second homework assignment, you are going to make a class-based simulation called "Humans vs. Zombies" using the Turtle module.
In this simulation, there will be instances of a Zombie class and a Human class. They will have slightly different
properties:

- different display icons
- different movement speeds
- different functions for choosing which way to move (zombies towards humans, humans away from zombies)
- Zombies will have an attack() method that they use if in range of a human, turning that human into a zombie

Now, here's what you need to do:

- First, register the images for the zombies and humans (Homer and Lisa) at the top of the script, below your imports.

- Then, create a class called `Agent`, with:

  - an `__init__()` method that:
    - is passed the dimensions of the simulation and saves them as an attribute
    - has an input parameter named `start_position` that defaults to `None` if no input is supplied. Save
      `start_position` as an atribute
    - defines the agent's `movement_speed` to be 1
    - creates an instance of the `Turtle()` class from the `turtle` module and saves it as an attribute
    - hides the agent's turtle and puts its pen up.
    - calls the `place_agent()` method defined below
  - a `place_agent()` method that:
    - uses the value of the agent's `start_position` attribute to decide where to place the agent
    - if a `start_position` is supplied, then move the turtle to that location and show the turtle
    - if a `start_position` is not supplied, then choose a random starting location within the dimensions of the
      simulation, and move the turtle to that position and show the turtle
      - Keep in mind that a Turtle screen has coordinates (0, 0) start at the center of the screen.
        This means that if you have a screen that is 800 pixels wide and 600 pixels tall, the
        x-coordinates go from -400 to 400 and the y- coordinates go from -300 to 300.
  - a `take_turn` method that:
    - calls the `find_move()` and `move()` methods that are defined below
  - a `check_if_legal_move()` method that:
    - is passed a position as an argument
    - returns `True` or `False` based on whether that location is in the simulation dimensions
  - a `find_move()` method that:
    - uses a while loop that loops until a legal move is found:
      - pick a random potential `new_position` based on randomly moving the turtle a distance of `movement_speed()` in
        a random direction
      - calls the `check_if_legal_move` method, and passes it the new_position
      - breaks out of the loop if the move is legal
    - returns the (legal) `new_position`
  - a `move()` method that:
    - is passed the `new_position` as an argument
    - moves the turtle to the `new_position`

- create a class called `Zombie` derived from the `Agent` class, with:

  - an `__init__()` method that:
    - calls its parent's init function (hint: you can do this by using `super()`)
    - sets the icon of the turtle to the zombie image (which you registered at the top of the file)
    - creates the attribute `attack_range` and sets it to 10
  - defines its own `take_turn()` function that is just like the parent move function, except it
    also calls the `attack()` method defined below after it moves
  - defines its own `find_move()` function that is like the parent's, except that, instead of moving
    `movement_speed` units in a random direction, the zombie moves up to `movement_speed` units in
    the direction of the closest human. So you need to figure out which human is the closest... If
    the closest human is less than movement_speed units away, then move to the closest human's exact
    location. Make sure to check that the zombie's move is legal using the parent's
    `check_if_legal_move` method.
  - defines its own `attack()` method (more details below â€” we'll come back to this)

- create a class called `Human` derived from the `Agent` class, with:

  - an `__init__()` method that:
    - calls its parent's init function (hint: you can do this by using `super()`)
    - sets the attribute `movement_speed` to 2
    - has a boolean attribute `smart` that is randomly set to `True` or `False`
    - sets the icon of the turtle to a picture of a Homer Simpson if not `smart`, and Lisa Simpson if `smart`
  - defines its own `find_move()` function that is like the parent's, except that
    - it takes in a `zombie_list` as an argument (which will be used to find the closest zombie further down)
    - if not `smart`, moves the human to a random legal location of distance `movement_speed` away,
      _just like its parent_
    - otherwise, if it is `smart`, moves a distance of `movement_speed` in the opposite direction of
      the closest zombie, if that is a legal move, and moves to a random legal location of
      `movement_speed` distance if it is that was not legal. (Hint: this will require that you
      calculate the distance between the human and every other zombie in the `zombie_list`, then
      choose the zombie with the smallest distance.)
  - defines its own `take_turn()` function that is like the parent's, except it also takes in a `zombie_list` as an
    argument, which it then passes to its `find_move()` method, which it calls

- Now we get to the primary logic of the program. Create and call a `main()` function that:

  - has the variable `dimensions` set to (800,600), and sets the turtle window to be that size. If that creates a window
    too big for your screen, you can make it smaller.
  - has the variables `num_humans` and `num_zombies`. Set them to 1 for now while you get the program working. Later,
    change them later to 20 humans and 1 zombie.
  - has the variables `human_list` and `zombie_list`, which start off empty. Fill each list with the specified number of
    Humans and Zombies. When you create each human and zombie, make sure each human spawns in a random location, and the
    zombie spawns in the middle of simulation
  - create a loop that loops while there are still humans. Inside that loop:
    - loop through the list of humans and call their `take_turn()` method
    - loop through the zombies and call their `take_turn()` method

- Now, go back to the `Zombie` class and fill in the `attack()` method so that it:
  - checks to see if a human from the `human_list` is within `attack_range` distance
  - if a human is in range, delete that human from the `human_list`, and add a new zombie to the `zombie_list` in the
    exact location.

If the simulation is running slowly, you can try to make it faster by directly controlling the screen updates, rather
than leaving it to the `turtle` module to automatically handle.

```python
# Create the screen towards the top of the main function
screen = turtle.Screen()
screen.tracer(0)

# Do all your logic for drawing elements here
...

# Refresh the screen after you've updated all the elements
# Note that this would be called once per frame, so ensure that
# it's at the bottom of whatever loop you are using
screen.update()
```

If the program runs too quickly, you can use the `time.sleep()` function to slow it down. Of course, this will require that you measure the time it takes between frames.

```python
import time

monitor_hertz = 60 # Assume that your monitor runs at 60 Hz
frame_time_target = 1 / monitor_hertz # how long one frame should take

frame_start_time = time.perf_counter()


# your logic for what happens in one frame goes here

frame_end_time = time.perf_counter()

# calculate the time it took to draw the frame
frame_time = frame_end_time - frame_start_time

# if it took less than the time it should have taken, sleep the rest of the time
if frame_time < frame_time_target:
    time.sleep(frame_time_target - frame_time)
```

To calculate the distance between two points, and to update the position of something based on an angle and a speed, you
can use basic geometry. Here are some helpful functions:

```python
import math


def calculate_distance(point_1, point_2):
    x1, y1 = point_1
    x2, y2 = point_2
    return math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2)


def calculate_new_position(current_position, angle_in_degrees, speed):
    """Takes a current position, an angle in degrees,
    and a movement speed, and returns the new position."""
    current_x, current_y = current_position
    angle_in_radians = math.radians(angle_in_degrees)
    new_x = current_x + (speed * math.cos(angle_in_radians))
    new_y = current_y + (speed * math.sin(angle_in_radians))
    return (new_x, new_y)

```

Turtle itself can calculate the distance between the current turtle and some coordinate pair:

```python
my_turtle.distance(x_position, y_position)
```

You can find .gif files for Homer, Lisa, and Zombies in the `images` folder of the textbook repository.

Good luck!

Next: 7.0. Advanced Topics<br>
Previous: [6.6. Lab 6](6.6.%20Lab%206.md)
